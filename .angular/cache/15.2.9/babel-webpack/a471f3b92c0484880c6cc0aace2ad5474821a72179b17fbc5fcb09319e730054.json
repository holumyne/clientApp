{"ast":null,"code":"import { ShopParams } from '../shared/models/shopParams';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shop.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../shared/paging-header/paging-header.component\";\nimport * as i4 from \"../shared/pager/pager.component\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"./product-item/product-item.component\";\nconst _c0 = [\"search\"];\nfunction ShopComponent_div_1_option_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const sort_r7 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sort_r7.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(sort_r7.name);\n  }\n}\nfunction ShopComponent_div_1_li_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_1_li_9_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const brand_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.onBrandSelected(brand_r8.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const brand_r8 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", brand_r8.id === ctx_r2.shopParams.brandId);\n    i0.ɵɵproperty(\"value\", brand_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(brand_r8.name);\n  }\n}\nfunction ShopComponent_div_1_li_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 21);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_1_li_13_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const type_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r12.onTypeSelected(type_r11.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r11 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", type_r11.id === ctx_r3.shopParams.typeId);\n    i0.ɵɵproperty(\"value\", type_r11.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(type_r11.name);\n  }\n}\nfunction ShopComponent_div_1_div_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵelement(1, \"app-product-item\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r14 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r14);\n  }\n}\nfunction ShopComponent_div_1_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24)(1, \"app-pager\", 25);\n    i0.ɵɵlistener(\"pageChanged\", function ShopComponent_div_1_div_26_Template_app_pager_pageChanged_1_listener($event) {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.onPageChanged($event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"totalCount\", ctx_r6.totalCount)(\"pageSize\", ctx_r6.shopParams.pageSize);\n  }\n}\nfunction ShopComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"section\", 3)(2, \"h5\", 4);\n    i0.ɵɵtext(3, \"Sort\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"select\", 5);\n    i0.ɵɵlistener(\"change\", function ShopComponent_div_1_Template_select_change_4_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.onSortSelected($event));\n    });\n    i0.ɵɵtemplate(5, ShopComponent_div_1_option_5_Template, 2, 2, \"option\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"h5\", 4);\n    i0.ɵɵtext(7, \"Brands\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"ul\", 7);\n    i0.ɵɵtemplate(9, ShopComponent_div_1_li_9_Template, 2, 4, \"li\", 8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"h5\", 4);\n    i0.ɵɵtext(11, \"Types\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"ul\", 7);\n    i0.ɵɵtemplate(13, ShopComponent_div_1_li_13_Template, 2, 4, \"li\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"section\", 9)(15, \"div\", 10);\n    i0.ɵɵelement(16, \"app-paging-header\", 11);\n    i0.ɵɵelementStart(17, \"div\", 12)(18, \"input\", 13, 14);\n    i0.ɵɵlistener(\"keyup.enter\", function ShopComponent_div_1_Template_input_keyup_enter_18_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.onSearch());\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_1_Template_button_click_20_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r20.onSearch());\n    });\n    i0.ɵɵtext(21, \"Search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_1_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.onReset());\n    });\n    i0.ɵɵtext(23, \"Reset\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(24, \"div\", 17);\n    i0.ɵɵtemplate(25, ShopComponent_div_1_div_25_Template, 2, 1, \"div\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(26, ShopComponent_div_1_div_26_Template, 2, 2, \"div\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.sortOptions);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.brands);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.types);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"totalCount\", ctx_r0.totalCount)(\"pageNumber\", ctx_r0.shopParams.pageNumber)(\"pageSize\", ctx_r0.shopParams.pageSize);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.products);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.totalCount > 0);\n  }\n}\nexport class ShopComponent {\n  constructor(shopService) {\n    this.shopService = shopService;\n    this.products = []; //where to store the response we got from our Api with an initial value of empty array.\n    this.brands = [];\n    this.types = [];\n    this.sortOptions = [{\n      name: 'Alphabetical',\n      value: 'name'\n    }, {\n      name: 'Price: Low to high',\n      value: 'priceAsc'\n    }, {\n      name: 'Price: High to low',\n      value: 'priceDesc'\n    }];\n    this.totalCount = 0;\n    this.shopParams = shopService.getShopParams(); //now initializing this property inside the constructor\n  }\n\n  ngOnInit() {\n    this.getProducts();\n    this.getBrands();\n    this.getTypes();\n  }\n  getProducts() {\n    // this.shopService.getProducts(this.brandIdSelected, this.typeIdSelected, this.sortSelected).subscribe({\n    this.shopService.getProducts(this.shopParams).subscribe({\n      next: response => {\n        this.products = response.data; //what to do next--return the product as response        \n        this.shopParams.pageNumber = response.pageIndex;\n        this.shopParams.pageSize = response.pageSize;\n        this.totalCount = response.count;\n      },\n      error: error => console.log(error),\n      complete: () => {\n        console.log('request completed');\n      }\n    });\n  }\n  getBrands() {\n    this.shopService.getBrands().subscribe({\n      // next: response => this.brands = response, //the reponse here is a brand array becos we don't hv a pagination here\n      next: response => this.brands = [{\n        id: 0,\n        name: 'All'\n      }, ...response],\n      error: error => console.log(error),\n      complete: () => {\n        console.log('request completed');\n      }\n    });\n  }\n  getTypes() {\n    this.shopService.getTypes().subscribe({\n      next: response => this.types = [{\n        id: 0,\n        name: 'All'\n      }, ...response],\n      error: error => console.log(error),\n      complete: () => {\n        console.log('request completed');\n      }\n    });\n  }\n  onBrandSelected(brandId) {\n    //this.brandIdSelected = brandId;\n    this.shopParams.brandId = brandId;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n  onTypeSelected(typeId) {\n    // this.typeIdSelected = typeId;\n    this.shopParams.typeId = typeId;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n  onSortSelected(event) {\n    //this.sortSelected = event.target.value;\n    this.shopParams.sort = event.target.value;\n    this.getProducts();\n  }\n  onPageChanged(event) {\n    if (this.shopParams.pageNumber !== event) {\n      this.shopParams.pageNumber = event;\n      this.getProducts();\n    }\n  }\n  onSearch() {\n    this.shopParams.search = this.searchTerm?.nativeElement.value;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n  onReset() {\n    if (this.searchTerm) this.searchTerm.nativeElement.value = '';\n    this.shopParams = new ShopParams();\n    this.getProducts();\n  }\n}\nShopComponent.ɵfac = function ShopComponent_Factory(t) {\n  return new (t || ShopComponent)(i0.ɵɵdirectiveInject(i1.ShopService));\n};\nShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ShopComponent,\n  selectors: [[\"app-shop\"]],\n  viewQuery: function ShopComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchTerm = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 1,\n  consts: [[1, \"container\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"row\"], [1, \"col-3\"], [1, \"text-warning\", \"ms-3\"], [1, \"form-select\", \"mb-4\", 3, \"change\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"my-3\"], [\"class\", \"list-group-item\", 3, \"active\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-9\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"pb-2\"], [3, \"totalCount\", \"pageNumber\", \"pageSize\"], [1, \"d-flex\", \"mt-2\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"form-control\", \"me-2\", 3, \"keyup.enter\"], [\"search\", \"\"], [1, \"btn\", \"btn-outline-primary\", \"mx-2\", 3, \"click\"], [1, \"btn\", \"btn-outline-success\", 3, \"click\"], [1, \"row\", \"row-cols-3\", \"g-3\", \"mb-4\"], [\"class\", \"col\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [3, \"value\"], [1, \"list-group-item\", 3, \"value\", \"click\"], [1, \"col\"], [3, \"product\"], [1, \"d-flex\", \"justify-content-center\"], [3, \"totalCount\", \"pageSize\", \"pageChanged\"]],\n  template: function ShopComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, ShopComponent_div_1_Template, 27, 8, \"div\", 1);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.types.length > 0 && ctx.brands.length > 0);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.PagingHeaderComponent, i4.PagerComponent, i5.NgSelectOption, i5.ɵNgSelectMultipleOption, i6.ProductItemComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["ShopParams","i0","ShopComponent","constructor","shopService","name","value","shopParams","getShopParams","ngOnInit","getProducts","getBrands","getTypes","subscribe","next","response","products","data","pageNumber","pageIndex","pageSize","totalCount","count","error","console","log","complete","brands","id","types","onBrandSelected","brandId","onTypeSelected","typeId","onSortSelected","event","sort","target","onPageChanged","onSearch","search","searchTerm","nativeElement","onReset","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\olumi\\Desktop\\ECommerce\\client\\src\\app\\shop\\shop.component.ts","C:\\Users\\olumi\\Desktop\\ECommerce\\client\\src\\app\\shop\\shop.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { Product } from '../shared/models/product';\nimport { ShopService } from './shop.service';\nimport { Brand } from '../shared/models/brand';\nimport { Type } from '../shared/models/type';\nimport { ShopParams } from '../shared/models/shopParams';\n\n@Component({\n  selector: 'app-shop',\n  templateUrl: './shop.component.html',\n  styleUrls: ['./shop.component.scss']\n})\nexport class ShopComponent implements OnInit {\n  @ViewChild('search') searchTerm?: ElementRef;\n  products: Product[] = []; //where to store the response we got from our Api with an initial value of empty array.\n  brands: Brand[] = [];\n  types: Type[] = [];\n  // brandIdSelected = 0;\n  // typeIdSelected = 0;\n  // sortSelected = 'name';\n\n  //shopParams = new ShopParams(); //now moving this to ShopService becos service is singleton, better stored there.\n  shopParams: ShopParams;\n  sortOptions = [\n    {name: 'Alphabetical', value: 'name'},\n    {name: 'Price: Low to high', value: 'priceAsc'},\n    {name: 'Price: High to low', value: 'priceDesc'},\n  ];\n  totalCount = 0;  \n\n  constructor(private shopService: ShopService) { \n    this.shopParams = shopService.getShopParams(); //now initializing this property inside the constructor\n  }\n\n  ngOnInit(): void {\n    this.getProducts();\n    this.getBrands();\n    this.getTypes();\n  }\n\n  getProducts() {\n   // this.shopService.getProducts(this.brandIdSelected, this.typeIdSelected, this.sortSelected).subscribe({\n      this.shopService.getProducts(this.shopParams).subscribe({\n      next: response => {\n        this.products = response.data;   //what to do next--return the product as response        \n         this.shopParams.pageNumber = response.pageIndex;\n         this.shopParams.pageSize = response.pageSize;\n         this.totalCount = response.count;\n        },\n      error: error => console.log(error),  //what to do if there is an error -- log the error into the console.\n      complete: () => {\n        console.log('request completed');\n      }\n    })\n  }\n  getBrands() {\n    this.shopService.getBrands().subscribe({\n     // next: response => this.brands = response, //the reponse here is a brand array becos we don't hv a pagination here\n      next: response => this.brands = [{id: 0, name: 'All'}, ...response], \n      error: error => console.log(error),\n      complete: () => {\n        console.log('request completed');\n      }\n    })\n  }\n  getTypes() {\n    this.shopService.getTypes().subscribe({\n      next: response => this.types = [{id: 0, name: 'All'}, ...response],  //...-spread operator\n      error: error => console.log(error),\n      complete: () => {\n        console.log('request completed');\n      }\n    })\n  }\n\n  onBrandSelected(brandId: number){\n    //this.brandIdSelected = brandId;\n    this.shopParams.brandId = brandId;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n\n  onTypeSelected(typeId: number){\n   // this.typeIdSelected = typeId;\n    this.shopParams.typeId = typeId;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n\n  onSortSelected(event: any){\n    //this.sortSelected = event.target.value;\n    this.shopParams.sort = event.target.value;\n    this.getProducts();\n  }\n\n  onPageChanged(event: any){\n     if (this.shopParams.pageNumber !== event){\n      this.shopParams.pageNumber = event;\n      this.getProducts();\n     }\n  }\n\n  onSearch(){\n    this.shopParams.search = this.searchTerm?.nativeElement.value;\n    this.shopParams.pageNumber = 1;\n    this.getProducts();\n  }\n\n  onReset(){\n    if (this.searchTerm) this.searchTerm.nativeElement.value = '';\n    this.shopParams = new ShopParams();\n    this.getProducts();\n  }\n}","<div class=\"container\">\r\n    <!-- row splited into two sections -->\r\n    <div class=\"row\" *ngIf=\"types.length > 0 && brands.length > 0\">\r\n        <section class=\"col-3\">\r\n            <!-- List Item for section 1-->\r\n            <h5 class=\"text-warning ms-3\">Sort</h5>\r\n            <select class=\"form-select mb-4\" (change)=\"onSortSelected($event)\">\r\n                <option *ngFor=\"let sort of sortOptions\" [value]=\"sort.value\">{{sort.name}}</option>\r\n            </select>\r\n\r\n            <h5 class=\"text-warning ms-3\">Brands</h5>\r\n            <ul class=\"list-group my-3\">\r\n                <li class=\"list-group-item\" *ngFor=\"let brand of brands\" [class.active]=\"brand.id === shopParams.brandId\"\r\n                    [value]=\"brand.id\" (click)=\"onBrandSelected(brand.id)\">{{brand.name}}</li>\r\n            </ul>\r\n            <h5 class=\"text-warning ms-3\">Types</h5>\r\n            <ul class=\"list-group my-3\">\r\n                <li class=\"list-group-item\" *ngFor=\"let type of types\" [class.active]=\"type.id === shopParams.typeId\"\r\n                    [value]=\"type.id\" (click)=\"onTypeSelected(type.id)\">{{type.name}}</li>\r\n            </ul>\r\n        </section>\r\n        <!-- Card for section 2 -->\r\n        <section class=\"col-9\">\r\n            <div class=\"d-flex justify-content-between align-items-center pb-2\">\r\n                <app-paging-header\r\n                [totalCount]=\"totalCount\"\r\n                [pageNumber]=\"shopParams.pageNumber\"\r\n                [pageSize]=\"shopParams.pageSize\"\r\n                >\r\n                </app-paging-header>\r\n                <div class=\"d-flex mt-2\">\r\n                    <input (keyup.enter)=\"onSearch()\" type=\"text\" placeholder=\"Search\" class=\"form-control me-2\" #search>\r\n                    <button (click)=\"onSearch()\" class=\"btn btn-outline-primary mx-2\">Search</button>\r\n                    <button (click)=\"onReset()\" class=\"btn btn-outline-success\">Reset</button>\r\n                </div>\r\n            </div>\r\n            <div class=\"row row-cols-3 g-3 mb-4\">\r\n                <!-- Main Card -->\r\n                <div class=\"col\" *ngFor=\"let product of products\">\r\n                    <app-product-item [product]=\"product\"></app-product-item>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"d-flex justify-content-center\" *ngIf=\"totalCount > 0\">\r\n                <app-pager\r\n                [totalCount]=\"totalCount\"\r\n                [pageSize]=\"shopParams.pageSize\"\r\n                (pageChanged)=\"onPageChanged($event)\"\r\n                >\r\n                </app-pager>\r\n            </div>\r\n        </section>\r\n    </div>\r\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}