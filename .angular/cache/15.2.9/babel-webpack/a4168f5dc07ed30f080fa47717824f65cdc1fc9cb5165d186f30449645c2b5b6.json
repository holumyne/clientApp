{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../account/account.service\";\nimport * as i3 from \"../basket/basket.service\";\nimport * as i4 from \"../shared/order-totals/order-totals.component\";\nimport * as i5 from \"../shared/components/stepper/stepper.component\";\nimport * as i6 from \"@angular/cdk/stepper\";\nimport * as i7 from \"./checkout-address/checkout-address.component\";\nimport * as i8 from \"./checkout-delivery/checkout-delivery.component\";\nimport * as i9 from \"./checkout-review/checkout-review.component\";\nimport * as i10 from \"./checkout-payment/checkout-payment.component\";\nexport let CheckoutComponent = /*#__PURE__*/(() => {\n  class CheckoutComponent {\n    constructor(fb, accountService, basketService) {\n      this.fb = fb;\n      this.accountService = accountService;\n      this.basketService = basketService;\n      this.checkoutForm = this.fb.group({\n        addressForm: this.fb.group({\n          firstName: ['', Validators.required],\n          lastName: ['', Validators.required],\n          street: ['', Validators.required],\n          city: ['', Validators.required],\n          state: ['', Validators.required],\n          zipcode: ['', Validators.required]\n        }),\n        deliveryForm: this.fb.group({\n          deliveryMethod: ['', Validators.required]\n        }),\n        paymentForm: this.fb.group({\n          nameOnCard: ['', Validators.required]\n        })\n      });\n    }\n    ngOnInit() {\n      this.getAddressFormValues();\n      this.getDeliveryMethodValue();\n    }\n    getAddressFormValues() {\n      this.accountService.getUserAddress().subscribe({\n        next: address => {\n          address && this.checkoutForm.get('addressForm')?.patchValue(address);\n        }\n      });\n    }\n    getDeliveryMethodValue() {\n      const basket = this.basketService.getCurrentBasketValue();\n      if (basket && basket.deliveryMethodId) {\n        this.checkoutForm.get('deliveryForm')?.get('deliveryMethod')?.patchValue(basket.deliveryMethodId.toString());\n      }\n    }\n  }\n  CheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n    return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.BasketService));\n  };\n  CheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CheckoutComponent,\n    selectors: [[\"app-checkout\"]],\n    decls: 15,\n    vars: 11,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkoutForm\"], [3, \"label\"], [3, \"appStepper\"], [1, \"col-4\"]],\n    template: function CheckoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", null, 3)(5, \"cdk-step\", 4);\n        i0.ɵɵelement(6, \"app-checkout-address\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"cdk-step\", 4);\n        i0.ɵɵelement(8, \"app-checkout-delivery\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"cdk-step\", 6);\n        i0.ɵɵelement(10, \"app-checkout-review\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"cdk-step\", 4);\n        i0.ɵɵelement(12, \"app-checkout-payment\", 5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"div\", 8);\n        i0.ɵɵelement(14, \"app-order-totals\");\n        i0.ɵɵelementEnd()()();\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(4);\n        let tmp_1_0;\n        let tmp_4_0;\n        let tmp_9_0;\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", (tmp_1_0 = ctx.checkoutForm.get(\"addressForm\")) == null ? null : tmp_1_0.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"label\", \"Delivery\")(\"completed\", (tmp_4_0 = ctx.checkoutForm.get(\"deliveryForm\")) == null ? null : tmp_4_0.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"label\", \"Review\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"appStepper\", _r0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"label\", \"Payment\")(\"completed\", (tmp_9_0 = ctx.checkoutForm.get(\"paymentForm\")) == null ? null : tmp_9_0.valid);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      }\n    },\n    dependencies: [i4.OrderTotalsComponent, i5.StepperComponent, i6.CdkStep, i7.CheckoutAddressComponent, i8.CheckoutDeliveryComponent, i9.CheckoutReviewComponent, i10.CheckoutPaymentComponent]\n  });\n  return CheckoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}