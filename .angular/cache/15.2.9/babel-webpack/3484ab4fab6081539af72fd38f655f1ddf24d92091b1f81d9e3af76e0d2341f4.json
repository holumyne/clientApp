{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../account/account.service\";\nimport * as i3 from \"../basket/basket.service\";\nimport * as i4 from \"../shared/order-totals/order-totals.component\";\nimport * as i5 from \"../shared/components/stepper/stepper.component\";\nimport * as i6 from \"@angular/cdk/stepper\";\nimport * as i7 from \"./checkout-address/checkout-address.component\";\nimport * as i8 from \"./checkout-delivery/checkout-delivery.component\";\nimport * as i9 from \"./checkout-review/checkout-review.component\";\nimport * as i10 from \"./checkout-payment/checkout-payment.component\";\nexport class CheckoutComponent {\n  constructor(fb, accountService, basketService) {\n    this.fb = fb;\n    this.accountService = accountService;\n    this.basketService = basketService;\n    this.checkoutForm = this.fb.group({\n      addressForm: this.fb.group({\n        firstName: ['', Validators.required],\n        lastName: ['', Validators.required],\n        street: ['', Validators.required],\n        city: ['', Validators.required],\n        state: ['', Validators.required],\n        zipcode: ['', Validators.required]\n      }),\n      deliveryForm: this.fb.group({\n        deliveryMethod: ['', Validators.required]\n      }),\n      paymentForm: this.fb.group({\n        nameOnCard: ['', Validators.required]\n      })\n    });\n  }\n  ngOnInit() {\n    this.getAddressFormValues();\n    this.getDeliveryMethodValue();\n  }\n  getAddressFormValues() {\n    this.accountService.getUserAddress().subscribe({\n      next: address => {\n        address && this.checkoutForm.get('addressForm')?.patchValue(address);\n      }\n    });\n  }\n  getDeliveryMethodValue() {\n    const basket = this.basketService.getCurrentBasketValue();\n    if (basket && basket.deliveryMethodId) {\n      this.checkoutForm.get('deliveryForm')?.get('deliveryMethod')?.patchValue(basket.deliveryMethodId.toString());\n    }\n  }\n}\nCheckoutComponent.ɵfac = function CheckoutComponent_Factory(t) {\n  return new (t || CheckoutComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AccountService), i0.ɵɵdirectiveInject(i3.BasketService));\n};\nCheckoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CheckoutComponent,\n  selectors: [[\"app-checkout\"]],\n  decls: 15,\n  vars: 11,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-8\"], [\"appStepper\", \"\"], [3, \"label\", \"completed\"], [3, \"checkoutForm\"], [3, \"label\"], [3, \"appStepper\"], [1, \"col-4\"]],\n  template: function CheckoutComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"app-stepper\", null, 3)(5, \"cdk-step\", 4);\n      i0.ɵɵelement(6, \"app-checkout-address\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"cdk-step\", 4);\n      i0.ɵɵelement(8, \"app-checkout-delivery\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"cdk-step\", 6);\n      i0.ɵɵelement(10, \"app-checkout-review\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"cdk-step\", 4);\n      i0.ɵɵelement(12, \"app-checkout-payment\", 5);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 8);\n      i0.ɵɵelement(14, \"app-order-totals\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(4);\n      let tmp_1_0;\n      let tmp_4_0;\n      let tmp_9_0;\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"label\", \"Address\")(\"completed\", (tmp_1_0 = ctx.checkoutForm.get(\"addressForm\")) == null ? null : tmp_1_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Delivery\")(\"completed\", (tmp_4_0 = ctx.checkoutForm.get(\"deliveryForm\")) == null ? null : tmp_4_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Review\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"appStepper\", _r0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"label\", \"Payment\")(\"completed\", (tmp_9_0 = ctx.checkoutForm.get(\"paymrntForm\")) == null ? null : tmp_9_0.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"checkoutForm\", ctx.checkoutForm);\n    }\n  },\n  dependencies: [i4.OrderTotalsComponent, i5.StepperComponent, i6.CdkStep, i7.CheckoutAddressComponent, i8.CheckoutDeliveryComponent, i9.CheckoutReviewComponent, i10.CheckoutPaymentComponent],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAAsBA,UAAU,QAAQ,gBAAgB;;;;;;;;;;;;AASxD,OAAM,MAAOC,iBAAiB;EAC5BC,YAAoBC,EAAe,EAAUC,cAA8B,EAAUC,aAA4B;IAA7F,OAAE,GAAFF,EAAE;IAAuB,mBAAc,GAAdC,cAAc;IAA0B,kBAAa,GAAbC,aAAa;IAOlG,iBAAY,GAAG,IAAI,CAACF,EAAE,CAACG,KAAK,CAAC;MAC3BC,WAAW,EAAE,IAAI,CAACJ,EAAE,CAACG,KAAK,CAAC;QACzBE,SAAS,EAAE,CAAC,EAAE,EAAER,UAAU,CAACS,QAAQ,CAAC;QACpCC,QAAQ,EAAE,CAAC,EAAE,EAAEV,UAAU,CAACS,QAAQ,CAAC;QACnCE,MAAM,EAAE,CAAC,EAAE,EAAEX,UAAU,CAACS,QAAQ,CAAC;QACjCG,IAAI,EAAE,CAAC,EAAE,EAAEZ,UAAU,CAACS,QAAQ,CAAC;QAC/BI,KAAK,EAAE,CAAC,EAAE,EAAEb,UAAU,CAACS,QAAQ,CAAC;QAChCK,OAAO,EAAE,CAAC,EAAE,EAAEd,UAAU,CAACS,QAAQ;OAClC,CAAC;MACFM,YAAY,EAAE,IAAI,CAACZ,EAAE,CAACG,KAAK,CAAC;QAC1BU,cAAc,EAAE,CAAC,EAAE,EAAEhB,UAAU,CAACS,QAAQ;OACzC,CAAC;MACFQ,WAAW,EAAE,IAAI,CAACd,EAAE,CAACG,KAAK,CAAC;QACzBY,UAAU,EAAE,CAAC,EAAE,EAAElB,UAAU,CAACS,QAAQ;OACrC;KACF,CAAC;EAtBmH;EAErHU,QAAQ;IACL,IAAI,CAACC,oBAAoB,EAAE;IAC3B,IAAI,CAACC,sBAAsB,EAAE;EAChC;EAmBAD,oBAAoB;IAClB,IAAI,CAAChB,cAAc,CAACkB,cAAc,EAAE,CAACC,SAAS,CAAC;MAC7CC,IAAI,EAAEC,OAAO,IAAG;QACdA,OAAO,IAAI,IAAI,CAACC,YAAY,CAACC,GAAG,CAAC,aAAa,CAAC,EAAEC,UAAU,CAACH,OAAO,CAAC;MACtE;KACD,CAAC;EACJ;EAEAJ,sBAAsB;IACpB,MAAMQ,MAAM,GAAG,IAAI,CAACxB,aAAa,CAACyB,qBAAqB,EAAE;IACzD,IAAID,MAAM,IAAIA,MAAM,CAACE,gBAAgB,EAAE;MACrC,IAAI,CAACL,YAAY,CAACC,GAAG,CAAC,cAAc,CAAC,EAAEA,GAAG,CAAC,gBAAgB,CAAC,EAAEC,UAAU,CAACC,MAAM,CAACE,gBAAgB,CAACC,QAAQ,EAAE,CAAC;;EAEhH;;AAtCW/B,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAAgC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCV9BC,8BAA4B;MAKRA,0CAA2E;MAC/EA,iBAAW;MACXA,mCAAqF;MACjFA,2CAA6E;MACjFA,iBAAW;MACXA,mCAA6B;MACzBA,0CAAsE;MAC1EA,iBAAW;MACXA,oCAAmF;MAC/EA,2CAA2E;MAC/EA,iBAAW;MAGnBA,+BAAmB;MACfA,oCAAqC;MACzCA,iBAAM;;;;;;;MAhBYA,eAAmB;MAAnBA,iCAAmB;MACHA,eAA6B;MAA7BA,+CAA6B;MAE7CA,eAAoB;MAApBA,kCAAoB;MACHA,eAA6B;MAA7BA,+CAA6B;MAE9CA,eAAkB;MAAlBA,gCAAkB;MACFA,eAAyB;MAAzBA,gCAAyB;MAEzCA,eAAmB;MAAnBA,iCAAmB;MACHA,eAA6B;MAA7BA,+CAA6B","names":["Validators","CheckoutComponent","constructor","fb","accountService","basketService","group","addressForm","firstName","required","lastName","street","city","state","zipcode","deliveryForm","deliveryMethod","paymentForm","nameOnCard","ngOnInit","getAddressFormValues","getDeliveryMethodValue","getUserAddress","subscribe","next","address","checkoutForm","get","patchValue","basket","getCurrentBasketValue","deliveryMethodId","toString","selectors","decls","vars","consts","template","i0"],"sourceRoot":"","sources":["C:\\Users\\olumi\\Desktop\\ECommerce\\client\\src\\app\\checkout\\checkout.component.ts","C:\\Users\\olumi\\Desktop\\ECommerce\\client\\src\\app\\checkout\\checkout.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { BasketService } from '../basket/basket.service';\nimport { AccountService } from '../account/account.service';\n\n@Component({\n  selector: 'app-checkout',\n  templateUrl: './checkout.component.html',\n  styleUrls: ['./checkout.component.scss']\n})\nexport class CheckoutComponent implements OnInit {\n  constructor(private fb: FormBuilder, private accountService: AccountService, private basketService: BasketService) { }\n\n  ngOnInit(): void {\n     this.getAddressFormValues();\n     this.getDeliveryMethodValue();\n  }\n\n  checkoutForm = this.fb.group({\n    addressForm: this.fb.group({\n      firstName: ['', Validators.required],\n      lastName: ['', Validators.required],\n      street: ['', Validators.required],\n      city: ['', Validators.required],\n      state: ['', Validators.required],\n      zipcode: ['', Validators.required],\n    }),\n    deliveryForm: this.fb.group({\n      deliveryMethod: ['', Validators.required]\n    }),\n    paymentForm: this.fb.group({\n      nameOnCard: ['', Validators.required]\n    })\n  })\n\n  getAddressFormValues() {\n    this.accountService.getUserAddress().subscribe({\n      next: address => {\n        address && this.checkoutForm.get('addressForm')?.patchValue(address)\n      }\n    })\n  }\n\n  getDeliveryMethodValue() {\n    const basket = this.basketService.getCurrentBasketValue();\n    if (basket && basket.deliveryMethodId) {\n      this.checkoutForm.get('deliveryForm')?.get('deliveryMethod')?.patchValue(basket.deliveryMethodId.toString());\n    }\n  }\n}\n","<div class=\"container mt-5\">\n    <div class=\"row\">\n        <div class=\"col-8\">\n            <app-stepper #appStepper>\n                <cdk-step [label]=\"'Address'\" [completed]=\"checkoutForm.get('addressForm')?.valid\">\n                    <app-checkout-address [checkoutForm]=\"checkoutForm\"></app-checkout-address>\n                </cdk-step>\n                <cdk-step [label]=\"'Delivery'\" [completed]=\"checkoutForm.get('deliveryForm')?.valid\">\n                    <app-checkout-delivery [checkoutForm]=\"checkoutForm\"></app-checkout-delivery>\n                </cdk-step>\n                <cdk-step [label]=\"'Review'\">\n                    <app-checkout-review  [appStepper]=\"appStepper\"></app-checkout-review>\n                </cdk-step>\n                <cdk-step [label]=\"'Payment'\" [completed]=\"checkoutForm.get('paymrntForm')?.valid\">\n                    <app-checkout-payment [checkoutForm]=\"checkoutForm\"></app-checkout-payment>\n                </cdk-step>\n            </app-stepper>\n        </div>\n        <div class=\"col-4\">\n            <app-order-totals></app-order-totals>\n        </div>\n    </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}